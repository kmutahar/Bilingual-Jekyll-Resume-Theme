{% comment %}
==================================================================
START: HREFLANG TAGS FOR MULTILINGUAL SEO
This logic generates the <link rel="alternate"> tags that tell
search engines about the different language versions of this page.
It only runs if a 't_id' (Translation ID) is set in the page's front matter.
==================================================================
{% endcomment %}
{% if page.t_id %}

  {% comment %}
    1. Find all pages on the site that share the *same* 't_id' as this
       current page. Store them in a new list called 'translations'.
  {% endcomment %}
  {% assign translations = site.pages | where: "t_id", page.t_id %}

  {% comment %}
    2. Loop through every page found in the 'translations' list.
       't' represents each individual page in the loop.
  {% endcomment %}
  {% for t in translations %}
    {% comment %}
      Print an 'alternate' tag for each page, using its
      'lang' (e.g., "en", "ar") and its full 'url'.
    {% endcomment %}
    <link rel="alternate" hreflang="{{ t.lang }}" href="{{ t.url | absolute_url }}" />
  {% endfor %}

  {% comment %}
    3. Find the English ('en') page from the 'translations' list
       to use as the "default" version.
  {% endcomment %}
  {% assign default_page = translations | where: "lang", "en" | first %}
  
  {% comment %}
    4. If an English version was found, print the 'x-default' tag.
       This tells Google which page to show if the user's
       language doesn't match any of our versions.
  {% endcomment %}
  {% if default_page %}
    <link rel="alternate" hreflang="x-default" href="{{ default_page.url | absolute_url }}" />
  {% endif %}

{% endif %}
{% comment %} ================= End HREFLANG logic ================= {% endcomment %}
